#!/usr/bin/env node
(function() {
  var CoffeeMill, arg, argv, bare, coffeemill, compress, dstDir, flag, joinFile, srcDir, testDir, _i, _len;
  CoffeeMill = require('../lib/coffeemill').CoffeeMill;
  coffeemill = new CoffeeMill();
  argv = process.argv;
  for (_i = 0, _len = argv.length; _i < _len; _i++) {
    arg = argv[_i];
    switch (arg) {
      case '-v':
      case '--version':
        console.log(CoffeeMill.version());
        return;
      case '-h':
      case '--help':
        console.log(CoffeeMill.help());
        return;
      case '-o':
      case '--out':
        flag = 'o';
        break;
      case '-t':
      case '--test':
        flag = 't';
        break;
      case '-c':
      case '--compress':
        compress = true;
        break;
      case '-b':
      case '--bare':
        bare = true;
        break;
      case '-j':
      case '--join':
        flag = 'j';
        break;
      default:
        switch (flag) {
          case 's':
            srcDir = arg;
            break;
          case 'o':
            dstDir = arg;
            break;
          case 't':
            testDir = arg;
          case 'j':
            joinFile = arg;
        }
    }
  }
  console.log(coffeemill.grind(srcDir, dstDir, testDir, compress, bare, joinFile));
})();
