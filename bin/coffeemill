#!/usr/bin/env node

var arg, argv, coffeemill, flag, opts, _i, _len;
coffeemill = require('../lib/coffeemill');
argv = process.argv;
opts = {};
for (_i = 2, _len = argv.length; _i < _len; _i++) {
  arg = argv[_i];
  switch (arg) {
    case '-v':
    case '--version':
      console.log(coffeemill.version());
      return;
    case '-h':
    case '--help':
      console.log(coffeemill.help());
      return;
    case '-o':
    case '--out':
      flag = 'o';
      break;
    case '-t':
    case '--test':
      flag = 't';
      break;
    case '-c':
    case '--command':
      flag = 'c';
      break;
    case '-j':
    case '--join':
      flag = 'j';
      break;
    case '-m':
    case '--minify':
      opts.minify = true;
      break;
    case '-b':
    case '--bare':
      opts.bare = true;
      break;
    case '-s':
    case '--silent':
      opts.silent = true;
      break;
    case '-bm':
    case '-mb':
      opts.bare = true;
      opts.minify = true;
      break;
    case '-bms':
    case '-bsm':
    case '-mbs':
    case '-msb':
    case '-sbm':
    case '-smb':
      opts.bare = true;
      opts.minify = true;
      opts.silent = true;
      break;
    default:
      switch (flag) {
        case 'o':
          opts.output = arg;
          flag = null;
          break;
        case 't':
          opts.test = arg;
          flag = null;
          break;
        case 'c':
          opts.command = arg;
          flag = null;
          break;
        case 'j':
          opts.join = arg;
          flag = null;
          break;
        default:
          opts.input = arg;
          break;
      }
  }
}
coffeemill.grind(opts);
